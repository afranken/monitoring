<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script type="text/javascript" src="javascript/vendor/jquery-2.0.3.js"></script>
    <script type="text/javascript" src="javascript/vendor/knockout-3.0.0.js"></script>
    <script type="text/javascript" src="javascript/vendor/bootstrap.js"></script>
    <script type="text/javascript" src="typescript/vendor/collections.js"></script>
    <script type="text/javascript" src="typescript/application.js"></script>
    <script type="text/javascript" src="typescript/sectionModel.js"></script>
    <script type="text/javascript" src="typescript/jobModel.js"></script>

    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" media="all" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap-theme.css" media="all" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap-theme-monitor.css" media="all" />
</head>
<body>

    <script type='text/javascript'>

        json = {
            "title": "myTitle",
            "sections": [
                {
                    "title": "mySectionTitle1",
                    "url": "http://localhost/url",
                    "description": "Test description",
                    "jobs": [
                        {
                            "title": "myJobTitle1",
                            "url": "http://localhost/11"
                        },
                        {
                            "title": "myJobTitle2",
                            "url": "http://localhost/22"
                        },
                        {
                            "title": "myJobTitle3",
                            "url": "http://localhost/22"
                        },
                        {
                            "title": "myJobTitle4",
                            "url": "http://localhost/22"
                        },
                        {
                            "title": "myJobTitle5",
                            "url": "http://localhost/22"
                        }
                    ]
                },
                {
                    "title": "mySectionTitle2",
                    "url": "http://localhost/url",
                    "description": "Test description",
                    "jobs": [
                        {
                            "title": "myJobTitle21",
                            "url": "http://localhost/211"
                        },
                        {
                            "title": "myJobTitle22",
                            "url": "http://localhost/222"
                        }
                    ]
                },
                {
                    "title": "mySectionTitle3",
                    "url": "http://localhost/url",
                    "description": "Test description",
                    "jobs": [
                        {
                            "title": "myJobTitle31",
                            "url": "http://localhost/211"
                        },
                        {
                            "title": "myJobTitle32",
                            "url": "http://localhost/222"
                        }
                    ]
                }
            ],
            "configuration": {
                "hosts": [
                    {
                        "hostname": "",
                        "username": "",
                        "password": ""
                    }
                ],
                "expiry": 36
            }
        };

        //init application
        $(function ()
        {
            var applicationViewModel = new ApplicationViewModel(json);
            ko.applyBindings(applicationViewModel);
        });

    </script>


    <!-- ko if: title -->
    <h1 id="mainTitle" class="alert alert-info" data-bind="text: title"></h1>
    <!-- /ko -->
    <div id="content" data-bind="template: { name: 'section-template', foreach: sections }" ></div>

    <script type="text/html" id="section-template">
        <div class="block">
            <!-- ko if: title -->
            <h2 class="alert alert-none">
                <!-- ko if: url -->
                <a class="alert-link" data-bind="attr: { href: url, title: title }, text: title"></a>
                <!-- /ko -->
                <!-- ko ifnot: url -->
                <span data-bind="text: title"></span>
                <!-- /ko -->
            </h2>
            <!-- /ko -->
            <!-- ko if: description -->
            <p data-bind="text: description"></p>
            <!-- /ko -->
            <!-- ko if: jobs -->
            <div data-bind="template: { name: 'job-template', foreach: jobs, afterRender: $root.getData }"></div>
            <!-- /ko -->
            <!-- ko if: sections -->
            <div data-bind="template: { name: 'section-template', foreach: sections }"></div>
            <!-- /ko -->
        </div>
    </script>

    <script type="text/html" id="job-template">
        <div data-bind="attr: { class: status}">
            <a class="alert-link" data-bind="attr: { href: url, title: title }, text: title"></a>
        </div>
    </script>

</body>
</html>