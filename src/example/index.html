<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script type="text/javascript" data-main="Application" src="vendor/require.js"></script>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" media="all" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap-theme.css" media="all" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap-theme-monitor.css" media="all" />
</head>
<body>


    <script type='text/javascript'>

        json = {
            "title": "myTitle",
            "sections": [
                {
                    "title": "mainSectionTitle1",
                    "sections": [
                        {
                            "title": "mySectionTitle1",
                            "url": "http://localhost/url",
                            "description": "Test description",
                            "hostname": "cm7-ci.coremedia.com",
                            "jobs": [
                                {
                                    "title": "Workspace",
                                    "name": "bazaar-jdk7-1"
                                },
                                {
                                    "title": "Retest System",
                                    "name": "bazaar-test-1"
                                },
                                {
                                    "title": "Smoke Tests",
                                    "name": "bazaar-smoke-tests-1"
                                }
                            ]
                        },
                        {
                            "title": "mySectionTitle2",
                            "url": "http://localhost/url",
                            "description": "Test description",
                            "jobs": [
                                {
                                    "title": "myJobTitle21",
                                    "name": "http://localhost/211"
                                },
                                {
                                    "title": "myJobTitle22",
                                    "name": "http://localhost/222"
                                }
                            ]
                        }
                    ]
                },
                {
                    "title": "mySectionTitle3",
                    "url": "http://localhost/url",
                    "description": "Test description",
                    "jobs": [
                        {
                            "title": "myJobTitle31",
                            "name": "http://localhost/211"
                        },
                        {
                            "title": "myJobTitle32",
                            "name": "http://localhost/222"
                        }
                    ]
                }
            ],
            "settings": {
                "hosts": [
                    {
                        "hostname": "",
                        "username": "",
                        "password": ""
                    }
                ],
                "expiry": 36
            }
        };

        requirejs.config({
            paths: {
                // location of three.js library
//        'threejs': 'https://raw.github.com/mrdoob/three.js/r62/build/three'
                'Application': './Application',
                'jquery': "./vendor/jquery-2.0.3",
                'knockout': "./vendor/knockout-3.0.0"
            }
        });

        //init application
            require(["Application", "knockout"], function(ApplicationViewModel, ko) {
                var applicationViewModel = new ApplicationViewModel(json);
                ko.applyBindings(applicationViewModel);
            });

    </script>


    <!-- ko if: title -->
    <h1 id="mainTitle" class="alert alert-info" data-bind="text: title"></h1>
    <!-- /ko -->
    <div id="content" data-bind="template: { name: 'section-template', foreach: sections }" ></div>

    <script type="text/html" id="section-template">
        <div class="block">
            <!-- ko if: title -->
            <h2 class="alert alert-none">
                <!-- ko if: url -->
                <a class="alert-link" data-bind="attr: { href: url, title: title }, text: title"></a>
                <!-- /ko -->
                <!-- ko ifnot: url -->
                <span data-bind="text: title"></span>
                <!-- /ko -->
            </h2>
            <!-- /ko -->
            <!-- ko if: description -->
            <p data-bind="text: description"></p>
            <!-- /ko -->
            <!-- ko if: jobs -->
            <div data-bind="template: { name: 'job-template', foreach: jobs, afterRender: $root.getData }"></div>
            <!-- /ko -->
            <!-- ko if: sections -->
            <div data-bind="template: { name: 'section-template', foreach: sections }"></div>
            <!-- /ko -->
        </div>
    </script>

    <script type="text/html" id="job-template">
        <div data-bind="attr: { class: status, style: style}">
            <a class="alert-link" data-bind="attr: { href: url, title: title }, text: title"></a>
        </div>
    </script>

</body>
</html>